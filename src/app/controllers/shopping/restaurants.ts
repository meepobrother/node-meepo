import { Controller, Get, Query, Param, Request } from '@nestjs/common';
import * as fetch from 'node-fetch';
import * as pinyin from 'pinyin';
import { CitiesService } from '../../tables/cities';

import { AddressBase } from '../core';
@Controller('shopping/restaurants')
export class RestaurantsCtrl extends AddressBase {
    constructor() {
        super();
    }

    @Get()
    index(
        @Param('id') id,
        @Query('latitude') latitude,
        @Query('longitude') longitude,
        @Query('offset') offset,
        @Query('limit') limit,
        @Query('extras') extras,
        @Query('keyword') keyword,
        @Query('restaurant_category_id') restaurant_category_id,
        @Query('restaurant_category_ids') restaurant_category_ids,
        @Query('order_by') order_by,
        @Query('delivery_mode') delivery_mode
        ) {
        return items;
    }
}
let items = [{"name":"演示","address":"地铁11号线支线,地铁11号线","id":1,"latitude":31.14123,"longitude":121.66807,"location":[121.66807,31.14123],"phone":"12387387234","category":"快餐便当/简餐","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a22f885ec81ce77ee844995"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a22f885ec81ce77ee844994"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a22f885ec81ce77ee844993"}],"status":0,"recent_order_num":934,"rating_count":190,"rating":4.4,"promotion_info":"好吃多好吃的","piecewise_agent_fee":{"tips":"配送费约¥5"},"opening_hours":["05:30/23:00"],"license":{"catering_service_license_image":"160189a9e0b29.png","business_license_image":"1601898d52d27.png"},"is_new":true,"is_premium":true,"image_path":"16018a6492334.jpeg","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":20,"float_delivery_fee":5,"distance":"179.6公里","order_lead_time":"2小时50分钟","description":"好吃多好吃的","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a22f885ec81ce77ee844997"},{"icon_name":"特","name":"优惠大酬宾","description":"支付是对方是否的","icon_color":"EDC123","id":2,"_id":"5a22f885ec81ce77ee844996"}],"__v":0},{"name":"测试店铺","address":"地铁9号线","id":2,"latitude":31.155313,"longitude":121.349273,"location":[121.349273,31.155313],"phone":"15023332020","category":"快餐便当/简餐","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a2370565e602c0c46e3b244"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a2370565e602c0c46e3b243"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a2370565e602c0c46e3b242"}],"status":0,"recent_order_num":396,"rating_count":449,"rating":5,"promotion_info":"欢迎光临，用餐高峰请提前下单，谢谢","piecewise_agent_fee":{"tips":"配送费约¥5"},"opening_hours":["8:30/20:30"],"license":{"catering_service_license_image":"","business_license_image":""},"is_new":true,"is_premium":true,"image_path":"16025dcd497139.jpg","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":20,"float_delivery_fee":5,"distance":"153.5公里","order_lead_time":"2小时28分钟","description":"","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a2370565e602c0c46e3b245"}],"__v":0},{"name":"酸辣米粉","address":"上海市徐汇区 ","id":3,"latitude":31.16897,"longitude":121.41817,"location":[121.41817,31.16897],"phone":"15000000000","category":"快餐便当/简餐","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a2371605e602c0c46e3b26d"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a2371605e602c0c46e3b26c"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a2371605e602c0c46e3b26b"}],"status":0,"recent_order_num":74,"rating_count":752,"rating":4.7,"promotion_info":"欢迎光临，用餐高峰请提前下单，谢谢","piecewise_agent_fee":{"tips":"配送费约¥1"},"opening_hours":["8:30/20:30"],"license":{"catering_service_license_image":"","business_license_image":""},"is_new":true,"is_premium":true,"image_path":"1601a7272ee40.png","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":15,"float_delivery_fee":1,"distance":"157.7公里","order_lead_time":"2小时33分钟","description":"酸辣米粉","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a2371605e602c0c46e3b26f"},{"icon_name":"特","name":"优惠大酬宾","description":"满100 送 50","icon_color":"EDC123","id":2,"_id":"5a2371605e602c0c46e3b26e"}],"__v":0},{"name":"功夫小子","address":"天津市东丽区新业六街青年广场","id":4,"latitude":39.09004,"longitude":117.55092,"location":[117.55092,39.09004],"phone":"22","category":"快餐便当/简餐","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a23bf035e602c0c46e3b315"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a23bf035e602c0c46e3b314"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a23bf035e602c0c46e3b313"}],"status":1,"recent_order_num":960,"rating_count":793,"rating":4.9,"promotion_info":"给你最美味的享受","piecewise_agent_fee":{"tips":"配送费约¥5"},"opening_hours":["05:30/23:00"],"license":{"catering_service_license_image":"1601ba20fc550.jpg","business_license_image":"1601ba20bb249.jpg"},"is_new":true,"is_premium":true,"image_path":"1601ba20f0b48.jpg","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":20,"float_delivery_fee":5,"distance":"1128.2公里","order_lead_time":"18小时45分钟","description":"中式快餐","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a23bf035e602c0c46e3b316"}],"__v":0},{"name":"我的商铺","address":"上海市徐汇区南站","id":5,"latitude":31.15344,"longitude":121.43065,"location":[121.43065,31.15344],"phone":"13123233232","category":"快餐便当/简餐","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a24a45c3ba8590522fa7029"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a24a45c3ba8590522fa7028"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a24a45c3ba8590522fa7027"}],"status":0,"recent_order_num":736,"rating_count":458,"rating":4.7,"promotion_info":"欢迎光临，用餐高峰请提前下单，谢谢","piecewise_agent_fee":{"tips":"配送费约¥5"},"opening_hours":["06:00/22:00"],"license":{"catering_service_license_image":"","business_license_image":""},"is_new":true,"is_premium":true,"image_path":"1601f21f74e61.jpg","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":20,"float_delivery_fee":5,"distance":"157.8公里","order_lead_time":"2小时33分钟","description":"","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a24a45c3ba8590522fa702a"}],"__v":0},{"name":"老虎菜","address":"北京市海淀区海淀南路33号","id":15,"latitude":39.97543,"longitude":116.30232,"location":[116.30232,39.97543],"phone":"13333333333","category":"小吃夜宵/地方小吃","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a26025d3ba8590522fa74f5"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a26025d3ba8590522fa74f4"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a26025d3ba8590522fa74f3"}],"status":1,"recent_order_num":326,"rating_count":617,"rating":4.5,"promotion_info":"欢迎光临，用餐高峰请提前下单，谢谢","piecewise_agent_fee":{"tips":"配送费约¥5"},"opening_hours":["8:30/20:30"],"license":{"catering_service_license_image":"","business_license_image":""},"is_new":true,"is_premium":true,"image_path":"16024792e41100.png","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":20,"float_delivery_fee":5,"distance":"1261.5公里","order_lead_time":"19小时43分钟","description":"","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a26025d3ba8590522fa74f6"}],"__v":0},{"name":"ericcy鸡排店","address":"上海市浦东新区 ","id":16,"latitude":31.24845,"longitude":121.56279,"location":[121.56666,31.24828],"phone":"15238188662","category":"快餐便当/简餐","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a260c903ba8590522fa754b"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a260c903ba8590522fa754a"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a260c903ba8590522fa7549"}],"status":1,"recent_order_num":243,"rating_count":5,"rating":4.8,"promotion_info":"欢迎光临，用餐高峰请提前下单，谢谢","piecewise_agent_fee":{"tips":"配送费约¥5"},"opening_hours":["8:30/20:30"],"license":{"catering_service_license_image":"","business_license_image":""},"is_new":true,"is_premium":true,"image_path":"16024a0fec0102.png","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":20,"float_delivery_fee":5,"distance":"174.9公里","order_lead_time":"2小时59分钟","description":"热门鸡排，好吃实惠。","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a260c903ba8590522fa754c"}],"__v":0},{"name":"火火火","address":"北京市房山区 ","id":21,"latitude":39.8192,"longitude":115.93408,"location":[115.93408,39.8192],"phone":"13300003333","category":"快餐便当/简餐","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a2637eb3ba8590522fa7628"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a2637eb3ba8590522fa7627"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a2637eb3ba8590522fa7626"}],"status":0,"recent_order_num":654,"rating_count":964,"rating":4.4,"promotion_info":"欢迎光临，用餐高峰请提前下单，谢谢","piecewise_agent_fee":{"tips":"配送费约¥5"},"opening_hours":["8:30/20:30"],"license":{"catering_service_license_image":"","business_license_image":""},"is_new":true,"is_premium":true,"image_path":"160254a6424123.png","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":20,"float_delivery_fee":5,"distance":"1264.1公里","order_lead_time":"21小时18分钟","description":"","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a2637eb3ba8590522fa7629"}],"__v":0},{"name":"12","address":"北京市丰台区莲花池东路118号","id":22,"latitude":39.8946,"longitude":116.3229,"location":[116.3229,39.8946],"phone":"13211113333","category":"快餐便当/简餐","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a26401a3ba8590522fa76c1"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a26401a3ba8590522fa76c0"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a26401a3ba8590522fa76bf"}],"status":1,"recent_order_num":124,"rating_count":642,"rating":5,"promotion_info":"欢迎光临，用餐高峰请提前下单，谢谢","piecewise_agent_fee":{"tips":"配送费约¥5"},"opening_hours":["8:30/20:30"],"license":{"catering_service_license_image":"","business_license_image":""},"is_new":true,"is_premium":true,"image_path":"16025692440125.png","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":20,"float_delivery_fee":5,"distance":"1275.3公里","order_lead_time":"15小时17分钟","description":"","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a26401a3ba8590522fa76c2"}],"__v":0},{"name":"张姐烤肉脆皮鸡饭（五道口店）","address":"北京市海淀区中关村东路18","id":23,"latitude":39.98804,"longitude":116.33398,"location":[116.33398,39.98804],"phone":"18600880914","category":"快餐便当/盖浇饭","supports":[{"description":"已加入“外卖保”计划，食品安全有保障","icon_color":"999999","icon_name":"保","id":7,"name":"外卖保","_id":"5a265b563ba8590522fa77b0"},{"description":"准时必达，超时秒赔","icon_color":"57A9FF","icon_name":"准","id":9,"name":"准时达","_id":"5a265b563ba8590522fa77af"},{"description":"该商家支持开发票，请在下单时填写好发票抬头","icon_color":"999999","icon_name":"票","id":4,"name":"开发票","_id":"5a265b563ba8590522fa77ae"}],"status":1,"recent_order_num":337,"rating_count":765,"rating":4.4,"promotion_info":"欢迎光临，用餐高峰请提前下单，谢谢","piecewise_agent_fee":{"tips":"配送费约¥2"},"opening_hours":["10:00/22:30"],"license":{"catering_service_license_image":"","business_license_image":""},"is_new":true,"is_premium":true,"image_path":"16025d4699b138.jpg","identification":{"registered_number":"","registered_address":"","operation_period":"","licenses_scope":"","licenses_number":"","licenses_date":"","legal_person":"","identificate_date":null,"identificate_agency":"","company_name":""},"float_minimum_order_amount":25,"float_delivery_fee":2,"distance":"1283.9公里","order_lead_time":"15小时23分钟","description":"您好，本店原材料公司直接供货，每天现做，饿了么配送","delivery_mode":{"color":"57A9FF","id":1,"is_solid":true,"text":"蜂鸟专送"},"activities":[{"icon_name":"减","name":"满减优惠","description":"满30减5，满60减8","icon_color":"f07373","id":1,"_id":"5a265b563ba8590522fa77b2"},{"icon_name":"新","name":"新用户立减","description":"新用户免单","icon_color":"70bc46","id":2,"_id":"5a265b563ba8590522fa77b1"}],"__v":0}];